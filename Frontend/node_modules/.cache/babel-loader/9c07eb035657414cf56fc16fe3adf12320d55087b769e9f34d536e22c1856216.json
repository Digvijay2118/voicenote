{"ast":null,"code":"import _regeneratorRuntime from\"D:/work/voicenote/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/work/voicenote/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"D:/work/voicenote/Frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/work/voicenote/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import io from'socket.io-client';import AudioPlayer from'react-h5-audio-player';import'react-h5-audio-player/lib/styles.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var socket=io('http://localhost:5000');// Replace with your server URL\nvar AudioReceiver=function AudioReceiver(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),audioMessages=_useState2[0],setAudioMessages=_useState2[1];useEffect(function(){socket.on('received-audio',function(audioPath){setAudioMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[{audio_url:audioPath}]);});});fetchAudioMessages();return function(){socket.off('received-audio');};},[]);var fetchAudioMessages=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/audio-messages');case 3:response=_context.sent;setAudioMessages(response.data);console.log(\"res====>\",response);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(\"error===>\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchAudioMessages(){return _ref.apply(this,arguments);};}();console.log(\"audioMessages===--->\",audioMessages);//   return (\n//     <div>\n//       {audioMessages.map((message, index) => (\n//         <div key={index}>\n//           {console.log(\"Audio src:\", `/audio/${message.audio_url}`)}\n//           <AudioPlayer src={`/audio/${message.audio_url}`} autoPlay controls />\n//         </div>\n//       ))}\n//     </div>\n//   );\n// };\nreturn/*#__PURE__*/_jsx(\"div\",{children:audioMessages.map(function(message,index){var audioUrl=\"http://localhost:5000\".concat(message.audio_url);console.log(\"Audio URL====:\",audioUrl);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AudioPlayer,{src:audioUrl,autoPlay:true,controls:true})},index);})});};export default AudioReceiver;","map":{"version":3,"names":["React","useState","useEffect","io","AudioPlayer","axios","jsx","_jsx","socket","AudioReceiver","_useState","_useState2","_slicedToArray","audioMessages","setAudioMessages","on","audioPath","prevMessages","concat","_toConsumableArray","audio_url","fetchAudioMessages","off","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","data","console","log","t0","stop","apply","arguments","children","map","message","index","audioUrl","src","autoPlay","controls"],"sources":["D:/work/voicenote/Frontend/src/AudioReceiver.js"],"sourcesContent":["  import React, { useState, useEffect } from 'react';\r\n  import io from 'socket.io-client';\r\n  import AudioPlayer from 'react-h5-audio-player';\r\n  import 'react-h5-audio-player/lib/styles.css';\r\n  import axios from 'axios';\r\n\r\n  const socket = io('http://localhost:5000'); // Replace with your server URL\r\n\r\n  const AudioReceiver = () => {\r\n    const [audioMessages, setAudioMessages] = useState([]);\r\n\r\n    useEffect(() => {\r\n      socket.on('received-audio', (audioPath) => {\r\n        setAudioMessages((prevMessages) => [...prevMessages, { audio_url: audioPath }]);\r\n      \r\n      });\r\n      fetchAudioMessages();\r\n\r\n      return () => {\r\n        socket.off('received-audio');\r\n      };\r\n    }, []);\r\n\r\n    const fetchAudioMessages = async () => {\r\n      try {\r\n        const response = await axios.get('/api/audio-messages');\r\n        setAudioMessages(response.data);\r\n        console.log(\"res====>\",response)\r\n      } catch (error) {\r\n        console.log(\"error===>\",error)\r\n      }\r\n    };\r\n    console.log(\"audioMessages===--->\",audioMessages)\r\n\r\n  //   return (\r\n  //     <div>\r\n  //       {audioMessages.map((message, index) => (\r\n          \r\n         \r\n          \r\n  //         <div key={index}>\r\n  //           {console.log(\"Audio src:\", `/audio/${message.audio_url}`)}\r\n  //           <AudioPlayer src={`/audio/${message.audio_url}`} autoPlay controls />\r\n  //         </div>\r\n          \r\n  //       ))}\r\n  //     </div>\r\n      \r\n  //   );\r\n  // };\r\n  return (\r\n    <div>\r\n      {audioMessages.map((message, index) => {\r\n        const audioUrl = `http://localhost:5000${message.audio_url}`;\r\n        console.log(\"Audio URL====:\", audioUrl);\r\n\r\n        return (\r\n          <div key={index}>\r\n            <AudioPlayer src={audioUrl} autoPlay controls />\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\n  export default AudioReceiver;\r\n"],"mappings":"wdAAE,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,EAAE,KAAM,kBAAkB,CACjC,MAAO,CAAAC,WAAW,KAAM,uBAAuB,CAC/C,MAAO,sCAAsC,CAC7C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,GAAM,CAAAC,MAAM,CAAGL,EAAE,CAAC,uBAAuB,CAAC,CAAE;AAE5C,GAAM,CAAAM,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B,IAAAC,SAAA,CAA0CT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/CG,aAAa,CAAAF,UAAA,IAAEG,gBAAgB,CAAAH,UAAA,IAEtCT,SAAS,CAAC,UAAM,CACdM,MAAM,CAACO,EAAE,CAAC,gBAAgB,CAAE,SAACC,SAAS,CAAK,CACzCF,gBAAgB,CAAC,SAACG,YAAY,WAAAC,MAAA,CAAAC,kBAAA,CAASF,YAAY,GAAE,CAAEG,SAAS,CAAEJ,SAAU,CAAC,IAAC,CAAC,CAEjF,CAAC,CAAC,CACFK,kBAAkB,CAAC,CAAC,CAEpB,MAAO,WAAM,CACXb,MAAM,CAACc,GAAG,CAAC,gBAAgB,CAAC,CAC9B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAD,kBAAkB,6BAAAE,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEA,CAAA5B,KAAK,CAAC6B,GAAG,CAAC,qBAAqB,CAAC,QAAjDN,QAAQ,CAAAG,QAAA,CAAAI,IAAA,CACdrB,gBAAgB,CAACc,QAAQ,CAACQ,IAAI,CAAC,CAC/BC,OAAO,CAACC,GAAG,CAAC,UAAU,CAACV,QAAQ,CAAC,CAAAG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAQ,EAAA,CAAAR,QAAA,aAEhCM,OAAO,CAACC,GAAG,CAAC,WAAW,CAAAP,QAAA,CAAAQ,EAAM,CAAC,0BAAAR,QAAA,CAAAS,IAAA,MAAAb,OAAA,gBAEjC,kBARK,CAAAN,kBAAkBA,CAAA,SAAAE,IAAA,CAAAkB,KAAA,MAAAC,SAAA,OAQvB,CACDL,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAACzB,aAAa,CAAC,CAEnD;AACA;AACA;AAIA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA,mBACEN,IAAA,QAAAoC,QAAA,CACG9B,aAAa,CAAC+B,GAAG,CAAC,SAACC,OAAO,CAAEC,KAAK,CAAK,CACrC,GAAM,CAAAC,QAAQ,yBAAA7B,MAAA,CAA2B2B,OAAO,CAACzB,SAAS,CAAE,CAC5DiB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAES,QAAQ,CAAC,CAEvC,mBACExC,IAAA,QAAAoC,QAAA,cACEpC,IAAA,CAACH,WAAW,EAAC4C,GAAG,CAAED,QAAS,CAACE,QAAQ,MAACC,QAAQ,MAAE,CAAC,EADxCJ,KAEL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,CAEV,CAAC,CAEC,cAAe,CAAArC,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}